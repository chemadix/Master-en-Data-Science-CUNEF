"0","m     = 4  # maximum lag in VAR"
"0","Datal = Data %>%"
"0","   pivot_longer(cols = -Date, names_to = ""Names"", values_to = ""Values"") %>%"
"0","   mutate(lag_value = list(0:m)) %>%"
"0","   unnest(cols = lag_value) %>%"
"0","   group_by(Names, lag_value) %>%"
"0","   mutate(Values = lag(Values, unique(lag_value))) %>%"
"0","   ungroup() %>%"
"0","   mutate(Names = if_else(lag_value == 0, Names,              # No suffix at lag 0"
"0","   paste0(Names, ""_"", str_pad(lag_value, 2, pad = ""0"")))) %>% # All other lags "
"0","   select(-lag_value) %>%                                     # Drop the redundant lag index"
"0","   pivot_wider(names_from = Names, values_from = Values) %>%"
"0","   slice(-c(1:m)) %>%                                         # Remove missing lagged initial values"
"0","   mutate(constant = 1)                                       # Add column of ones at end"
